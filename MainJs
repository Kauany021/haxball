const{readFileSync:a}=require("original-fs"),{ipcRenderer:b}=require("electron");var $xs=require("fetch").fetchUrl;const $mn=document.getElementsByClassName("gameframe")[0].contentWindow.document;$xs("https://raw.githubusercontent.com/Kauany021/haxball/main/Design",function(c,d,a){if(a&&""!=a.toString()){let b=a.toString();$mn.head.insertAdjacentHTML("beforeend",b)}}),document.querySelector("body > div > div.header").remove(),document.querySelector("body > div > div > div").remove();let $bv,$ty,$tf,$zk;function $zn(b,f){let c=b.getElementsByClassName("keyframe");for(i=0;i<c.length;i++){let a=c[i];if(30>Math.abs(a.getBoundingClientRect().x+a.getBoundingClientRect().width/2-f.clientX)){let g=b.getElementsByClassName($tf)[0],h=getComputedStyle(g).order,d=getComputedStyle(a).order,e=$bv[$ty][1];e.splice(d,0,e.splice(h,1)[0]),$zo(),$tf=d}}}function $vg(c){let a=document.getElementsByClassName("list")[0].getElementsByClassName("anim");for(i=0;i<a.length;i++){let b=a[i].getElementsByTagName("input")[0],d=Math.abs(b.getBoundingClientRect().y+b.getBoundingClientRect().height/2-c.clientY),e=$ty;d<20&&($bv.splice(i,0,$bv.splice(e,1)[0]),$ty=i,$zo())}}function $xx(a){$bv[a][1].push(["",""]),$zo()}document.addEventListener("mouseup",c=>{let b=document.getElementsByClassName("main")[0].getElementsByClassName("list")[0];if(!0==$zk){b.getElementsByClassName("anim "+$ty)[0].getElementsByTagName("input")[0].style="background-color: rgb(45,45,45)",$ty=null,$zk=!1;return}if(null==$ty||null==$tf)return;let a=b.getElementsByClassName("anim "+$ty)[0].getElementsByClassName("keyframe "+$tf)[0];if(!a){$ty=null,$cd=null;return}a.style.background="rgb(34,34,34)",a.getElementsByTagName("input")[0].style.color="rgb(255,255,255)",a.getElementsByTagName("input")[1].style.color="rgb(255,255,255)",$ty=null,$tf=null}),document.addEventListener("mousemove",a=>{null!=$ty&&$xo(a)});let $cx=new Array;function $xp(b){let a="anim "+b;$cx[a]&&new Date().getTime()-$cx[a]<=200?($bv.splice(b,1),$zo()):$cx[a]=new Date().getTime()}function $xb(c,b){let a="keyframe "+b;$cx[a]&&new Date().getTime()-$cx[a]<=200?($bv[c][1].splice(b,1),$zo()):$cx[a]=new Date().getTime()}function $xo(a){!0==$zk?$vg(a):$zn(document.getElementsByClassName("anim")[$ty],a)}function $rd(a,b){G_minDistance=1e9,$cd=null,$tf=b,$ty=a}function $pw(a){G_minDistance=1e9,$zk=!0,$ty=a}function $mx(a){let b=document.getElementsByClassName("main")[0].getElementsByClassName("list")[0].getElementsByClassName("anim "+a)[0].getElementsByTagName("input")[0];$bv[a][0]=b.value}function $nm(a,b){let d="keyframe "+b,e=document.getElementsByClassName("list")[0].getElementsByClassName("anim")[a],c=e.getElementsByClassName(d)[0].getElementsByTagName("input")[0].value,f=e.getElementsByClassName(d)[0].getElementsByTagName("input")[1].value;c=parseFloat(c),$bv[a][1][b][0]=c,$bv[a][1][b][1]=f}function $rf(g,e,d){let f=g[1][d],a=document.createElement("div");a.style.order=d,a.setAttribute("class","keyframe "+d),a.setAttribute("onclick","$xb("+e+","+d+")"),a.addEventListener("mousedown",a=>{$rd(e,d)});let b=document.createElement("input");b.setAttribute("placeholder","5s"),b.setAttribute("maxlength","3"),b.setAttribute("type","number"),b.setAttribute("id","seconds"),b.setAttribute("onkeyup","$nm("+e+","+d+")"),b.setAttribute("value",f[0]);let c=document.createElement("input");return c.setAttribute("placeholder","\u{1F923}"),c.setAttribute("maxlength","2"),c.setAttribute("type","text"),c.setAttribute("onkeyup","$nm("+e+","+d+")"),c.setAttribute("id","value"),c.setAttribute("value",f[1]),a.appendChild(b),a.appendChild(c),a}function $zo(){let c=document.getElementsByClassName("main")[0].getElementsByClassName("list")[0];for(;c.getElementsByClassName("anim")[0];)c.getElementsByClassName("anim")[0].remove();for(i=0;i<$bv.length;i++){let d=$bv[i],b=document.createElement("div");b.style="display: flex",b.setAttribute("class","anim "+i),b.style.order=i;let a=document.createElement("input");for(a.setAttribute("value",d[0]),a.setAttribute("id","name"),a.setAttribute("maxlength","15"),a.setAttribute("type","text"),a.setAttribute("onclick","$xp("+i+")"),a.addEventListener("mousedown",a=>{$pw(getComputedStyle(b).order)}),a.setAttribute("onkeyup","$mx("+i+")"),b.appendChild(a),$xz=0;$xz<d[1].length;$xz++){let h=$rf(d,i,$xz);b.appendChild(h)}let e=document.createElement("div");e.setAttribute("id","addKF"),e.setAttribute("onclick","$xx("+i+")"),b.appendChild(e),c.appendChild(b)}if($tf){let f=c.getElementsByClassName("anim "+$ty)[0].getElementsByClassName("keyframe "+$tf)[0];f.style.background="rgb(200,200,200)",f.getElementsByTagName("input")[0].style.color="rgb(0,0,0)",f.getElementsByTagName("input")[1].style.color="rgb(0,0,0)"}else if(!0==$zk){let g=c.getElementsByClassName("anim "+$ty)[0].getElementsByTagName("input")[0];g.style.background="rgb(200,200,200)",g.style.color="rgb(0,0,0)"}}$xs("https://raw.githubusercontent.com/Kauany021/haxball/main/header",function(e,f,a){if(a&&""!=a.toString()){let d=a.toString();document.body.insertAdjacentHTML("afterbegin",d),document.querySelector("#closeButton").addEventListener("click",a=>{b.send("close")}),document.querySelector("#animationsButton").addEventListener("click",a=>{"none"==getComputedStyle(document.getElementsByClassName("main")[0]).display?($dx(!1),document.getElementsByClassName("main")[0].style.display="flex",localStorage.getItem("animations")||localStorage.setItem("animations",JSON.stringify($rx)),$bv=JSON.parse(localStorage.getItem("animations")),document.getElementsByClassName("saveButton")[0].style.display="flex",document.getElementsByClassName("createAnimButton")[0].style="display: flex",document.getElementsByClassName("resetButton")[0].style="display: flex",document.getElementById("animationsButton").textContent="CANCELAR",$zo()):(document.getElementsByClassName("main")[0].style.display="none",document.getElementsByClassName("saveButton")[0].style.display="none",document.getElementsByClassName("createAnimButton")[0].style="display: none",document.getElementsByClassName("resetButton")[0].style="display: none",document.getElementById("animationsButton").textContent="ANIMA\xc7\xd5ES")});let c=document.querySelector("body > header > ul > div.saveButton");c.addEventListener("mouseenter",b=>{if(null==$bv)return;let a=JSON.parse(localStorage.getItem("animations"));JSON.stringify(a)===JSON.stringify($bv)||(c.style="background-color: rgb(16, 136, 62); display: flex")}),c.addEventListener("mouseleave",a=>{null!=$bv&&(c.style="background-color: rgb(35,35,35); display: flex")}),c.addEventListener("click",b=>{if(null==$bv)return;let a=JSON.parse(localStorage.getItem("animations"));JSON.stringify(a)!==JSON.stringify($bv)&&(localStorage.setItem("animations",JSON.stringify($bv)),document.getElementsByClassName("main")[0].style.display="none",document.getElementsByClassName("saveButton")[0].style="background-color: rgb(35,35,35)",document.getElementsByClassName("saveButton")[0].style.display="none",document.getElementsByClassName("createAnimButton")[0].style="display: none",document.getElementsByClassName("resetButton")[0].style="display: none",document.getElementById("animationsButton").textContent="ANIMA\xc7\xd5ES",$bv[0]&&$mn.querySelector("#AnimName")&&($mn.querySelector("#AnimName").textContent="Anim: "+$bv[0][0]),$bv=null,$ax=0,$ty=null,$tf=null)}),document.getElementsByClassName("createAnimButton")[0].addEventListener("click",a=>{null!=$bv&&($bv.push(["Teste01",[[1,"K"],[1,"A"],[1,"U"]]]),$zo())}),setTimeout(()=>{b.send("gameModifyLoaded")},3e3)}});const $ou="Haxball X",$uy="snapshot-1.0.0",$yf="Kauany - ARENA CUP 2022\u2764";let $xr=!1,$rx=[["Kauany",[[.5,"K"],[.5,"A"],[.5,"U"],[.5,"A"],[.5,"N"],[.5,"Y"]]],["Arena Cup",[[.5,"A"],[.5,"R"],[.5,"E"],[.5,"N"],[.5,"A"],[1,""],[.5,"C"],[.5,"U"],[.5,"P"]]]],$lx=document.getElementsByClassName("flexRow flexGrow")[0],$ux=document.createElement("div");$ux.setAttribute("class","gameInfo"),$ux.style="display: flex; height: content-fit; position: Absolute; bottom: 1.6vw; right: 10px;";let $ex=document.createElement("div");$ex.setAttribute("class","gameInfo"),$ex.style="display: flex; flex-flow: wrap; width: 13vw; height: content-fit; position: Absolute; bottom: 0.5vw; right: 10px; justify-content: center; align-items: center";let $sx=document.createElement("div");$sx.textContent="Haxball X",$sx.style="align-items: center; justify-content: center; width: content-fit; height: content-fit; font-size: 1vw; font-family: 'Calibri'; color: rgb(255,255,255); white-space: nowrap; margin-right: 0.2vw; opacity: 50%",$ux.appendChild($sx);let $xi=document.createElement("div");$xi.textContent="vers\xe3o snapshot-1.0.0",$xi.style="align-items: center; justify-content: center;width:content-fit; height: content-fit; font-size: 1vw; font-family: 'Calibri'; color: rgb(200,200,200); white-space: nowrap; opacity: 50%",$ux.appendChild($xi);let $vx=document.createElement("div");$vx.textContent="Kauany - ARENA CUP 2022\u2764",$vx.style="align-items: center; justify-content: center;width:content-fit; height: content-fit; width: content-fit; font-size: 1vw; font-family: 'Calibri'; color: rgb(182, 57, 57); white-space: nowrap; opacity: 50%;",$ex.appendChild($vx),$lx.appendChild($ux),$lx.appendChild($ex);let $ax=0,$bs=0,$wx=!1;function $aa(a,h){let b=a.querySelector("body > div > div > div.bottom-section > div.chatbox-view > div.input > input[type=text]");if(!b){$xr=!1;return}let i=a.getElementsByClassName("input")[0].getElementsByTagName("button")[0],j=a.getElementsByClassName("log ps")[0],k=JSON.parse(localStorage.getItem("animations")),d=k[$ax];if($xr==h&&d){let e=d[1],c=e[$bs],f=5e3;if(c)for(let g of(f=1e3*c[0],!1==$wx&&a.activeElement!=b&&(b.value="/avatar "+c[1],i.click(),e[$bs+1]?$bs+=1:$bs=0),j.getElementsByClassName("notice")))"Avatar set"==g.textContent&&g.remove();setTimeout(()=>{$xr==h&&$aa(a,$xr)},f)}}function $dx(b){let a=$mn.getElementsByClassName("isPlaying")[0];a&&(!0==b?($xr=new Date().getTime(),a.textContent="Playing: SIM",a.style="color: rgb(170, 245, 110)",$bs=0,$aa($mn,$xr)):($xr=!1,a.textContent="Playing: N\xc3O",a.style="color: rgb(245, 110, 110)"))}async function $bx(){setTimeout(()=>{let e=$mn.getElementsByClassName("game-view")[0],f=$mn.getElementsByClassName("gui")[0],g=$mn.getElementsByClassName("roomlist-view")[0],h=$mn.getElementsByClassName("choose-nickname-view")[0];if(e&&!f){document.getElementsByClassName("gameInfo")[0].style.display="none",document.getElementsByClassName("gameInfo")[1].style.display="none",$mn.querySelector("body > div:nth-child(1) > div > div.bottom-section > div.buttons").style="width: 200px";let i=$mn.querySelector("body > div:nth-child(1) > div > div.bottom-section > div.buttons"),a=document.createElement("div");a.style="display: flex; width: 100%; height: 100%; flex-direction: column; align-items: center; justify-content: center;",a.className="gui";let b=document.createElement("div");b.textContent="Anim: Ola World",b.id="AnimName",b.style="margin-bottom: 5px; font-size: 13px; font-family: calibri; ",a.appendChild(b);let c=document.createElement("div");c.setAttribute("class","isPlaying"),c.textContent="Playing: N\xc3O",c.style="margin-bottom: 5px; font-size: 18px; font-family: calibri; color: rgb(245,110,110)",a.appendChild(c),i.appendChild(a);let d=JSON.parse(localStorage.getItem("animations"));d.length>0||(localStorage.setItem("animations",JSON.stringify($rx)),d=$rx),$mn.querySelector("#AnimName").textContent="Anim: "+d[$ax][0]}else(g||h)&&"none"==getComputedStyle(document.getElementsByClassName("gameInfo")[0]).display&&(document.getElementsByClassName("gameInfo")[0].style.display="flex",document.getElementsByClassName("gameInfo")[1].style.display="flex");$bx($mn)},100)}$mn.addEventListener("keydown",c=>{if(!$mn.getElementsByClassName("input")[0])return;let d=$mn.getElementsByClassName("input")[0].getElementsByTagName("input")[0];if("G"==c.key.toUpperCase()){if($mn.activeElement==d||!$mn.getElementsByClassName("isPlaying")[0])return;!1==$xr?$dx(!0):$dx(!1)}else if("I"==c.key.toUpperCase()){let b=JSON.parse(localStorage.getItem("animations"));if(!$mn.querySelector("#AnimName"))return;0==b.length&&(localStorage.setItem("animations",JSON.stringify($rx)),b=$rx),b[$ax+1]?($ax+=1,$mn.querySelector("#AnimName").textContent="Anim: "+b[$ax][0]):($ax=0,$mn.querySelector("#AnimName").textContent="Anim: "+b[$ax][0]),$bs=0}else if("U"==c.key.toUpperCase()){let a=JSON.parse(localStorage.getItem("animations"));0==a.length&&(localStorage.setItem("animations",JSON.stringify($rx)),a=$rx),a[$ax-1]&&a[$ax-1][0]?($ax-=1,$mn.querySelector("#AnimName").textContent="Anim: "+a[$ax][0]):($ax=a.length-1,$mn.querySelector("#AnimName").textContent="Anim: "+a[$ax][0]),$bs=0}}),$bx()
