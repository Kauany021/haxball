const{readFileSync:e}=require("original-fs");const{ipcRenderer:t}=require("electron");var n=require("fetch").fetchUrl;const l=document.getElementsByClassName("gameframe")[0].contentWindow.document;n("https://raw.githubusercontent.com/Kauany021/haxball/main/Design",(function(e,t,n){if(n&&n.toString()!=""){let e=n.toString();l.head.insertAdjacentHTML("beforeend",e)}}));document.querySelector("body > div > div.header").remove();document.querySelector("body > div > div > div").remove();let a;let s,o,m;function r(e,t){let n=e.getElementsByClassName("keyframe");for(i=0;i<n.length;i++){let l=n[i];let m=Math.abs(l.getBoundingClientRect().x+l.getBoundingClientRect().width/2-t.clientX);if(m<30){let t=e.getElementsByClassName(o)[0];let n=getComputedStyle(t).order;let i=getComputedStyle(l).order;let m=a[s][1];m.splice(i,0,m.splice(n,1)[0]);b();o=i}}}function u(e){let t=document.getElementsByClassName("list")[0].getElementsByClassName("anim");for(i=0;i<t.length;i++){let n=t[i];let l=n.getElementsByTagName("input")[0];let o=Math.abs(l.getBoundingClientRect().y+l.getBoundingClientRect().height/2-e.clientY);let m=s;if(o<20){a.splice(i,0,a.splice(m,1)[0]);s=i;b()}}}document.addEventListener("mouseup",(e=>{let t=document.getElementsByClassName("main")[0].getElementsByClassName("list")[0];if(m==true){let e=t.getElementsByClassName("anim "+s)[0].getElementsByTagName("input")[0].style="background-color: rgb(45,45,45)";s=null;m=false;return}if(s==null||o==null)return;let n=t.getElementsByClassName("anim "+s)[0];let l=n.getElementsByClassName("keyframe "+o)[0];if(!l){s=null;G_toKeyframe=null;return}l.style.background="rgb(34,34,34)";l.getElementsByTagName("input")[0].style.color="rgb(255,255,255)";l.getElementsByTagName("input")[1].style.color="rgb(255,255,255)";s=null;o=null}));document.addEventListener("mousemove",(e=>{if(s==null)return;f(e)}));function c(e){a[e][1].push(["",""]);b()}let d=new Array;function y(e){let t="anim "+e;if(d[t]){if((new Date).getTime()-d[t]<=200){a.splice(e,1);b()}else{d[t]=(new Date).getTime()}}else{d[t]=(new Date).getTime()}}function g(e,t){let n="keyframe "+t;if(d[n]){if((new Date).getTime()-d[n]<=200){a[e][1].splice(t,1);b()}else{d[n]=(new Date).getTime()}}else{d[n]=(new Date).getTime()}}function f(e){if(m==true){u(e)}else{let t=document.getElementsByClassName("anim")[s];r(t,e)}}function p(e,t){G_minDistance=1e9;G_toKeyframe=null;o=t;s=e}function C(e){G_minDistance=1e9;m=true;s=e}function N(e){let t=document.getElementsByClassName("main")[0].getElementsByClassName("list")[0];let n=t.getElementsByClassName("anim "+e)[0];let l=n.getElementsByTagName("input")[0];a[e][0]=l.value}function E(e,t){let n="keyframe "+t;let l=document.getElementsByClassName("list")[0];let i=l.getElementsByClassName("anim")[e];let s=i.getElementsByClassName(n)[0].getElementsByTagName("input")[0].value;let o=i.getElementsByClassName(n)[0].getElementsByTagName("input")[1].value;s=parseFloat(s);a[e][1][t][0]=s;a[e][1][t][1]=o}function B(e,t,n){let l=e[1][n];let i=document.createElement("div");i.style.order=n;i.setAttribute("class","keyframe "+n);i.setAttribute("onclick","removeKF("+t+","+n+")");i.addEventListener("mousedown",(e=>{p(t,n)}));let a=document.createElement("input");a.setAttribute("placeholder","5s");a.setAttribute("maxlength","3");a.setAttribute("type","number");a.setAttribute("id","seconds");a.setAttribute("onkeyup","VAR_TimeKeyDown("+t+","+n+")");a.setAttribute("value",l[0]);let s=document.createElement("input");s.setAttribute("placeholder","🤣");s.setAttribute("maxlength","2");s.setAttribute("type","text");s.setAttribute("onkeyup","VAR_TimeKeyDown("+t+","+n+")");s.setAttribute("id","value");s.setAttribute("value",l[1]);i.appendChild(a);i.appendChild(s);return i}function b(){let e=document.getElementsByClassName("main")[0].getElementsByClassName("list")[0];while(e.getElementsByClassName("anim")[0]){let t=e.getElementsByClassName("anim")[0];t.remove()}for(i=0;i<a.length;i++){let t=a[i];let n=document.createElement("div");n.style="display: flex";n.setAttribute("class","anim "+i);n.style.order=i;let l=document.createElement("input");l.setAttribute("value",t[0]);l.setAttribute("id","name");l.setAttribute("maxlength","15");l.setAttribute("type","text");l.setAttribute("onclick","VAR_removeAnim("+i+")");l.addEventListener("mousedown",(e=>{C(getComputedStyle(n).order)}));l.setAttribute("onkeyup","VAR_TempSave("+i+")");n.appendChild(l);for(VAR_kfIndex=0;VAR_kfIndex<t[1].length;VAR_kfIndex++){let e=B(t,i,VAR_kfIndex);n.appendChild(e)}let s=document.createElement("div");s.setAttribute("id","addKF");s.setAttribute("onclick","addKF("+i+")");n.appendChild(s);e.appendChild(n)}if(o){let t=e.getElementsByClassName("anim "+s)[0].getElementsByClassName("keyframe "+o)[0];t.style.background="rgb(200,200,200)";t.getElementsByTagName("input")[0].style.color="rgb(0,0,0)";t.getElementsByTagName("input")[1].style.color="rgb(0,0,0)"}else if(m==true){let t=e.getElementsByClassName("anim "+s)[0].getElementsByTagName("input")[0];t.style.background="rgb(200,200,200)";t.style.color="rgb(0,0,0)"}}n("https://raw.githubusercontent.com/Kauany021/haxball/main/header",(function(e,n,i){if(i&&i.toString()!=""){let e=i.toString();document.body.insertAdjacentHTML("afterbegin",e);let n=document.querySelector("#closeButton");n.addEventListener("click",(e=>{t.send("close")}));let m=document.querySelector("#animationsButton");m.addEventListener("click",(e=>{if(getComputedStyle(document.getElementsByClassName("main")[0]).display=="none"){D(false);document.getElementsByClassName("main")[0].style.display="flex";if(localStorage.getItem("animations")){a=JSON.parse(localStorage.getItem("animations"))}else{localStorage.setItem("animations",JSON.stringify(x));a=JSON.parse(localStorage.getItem("animations"))}document.getElementsByClassName("saveButton")[0].style.display="flex";document.getElementsByClassName("createAnimButton")[0].style="display: flex";document.getElementsByClassName("resetButton")[0].style="display: flex";document.getElementById("animationsButton").textContent="CANCELAR";b()}else{document.getElementsByClassName("main")[0].style.display="none";document.getElementsByClassName("saveButton")[0].style.display="none";document.getElementsByClassName("createAnimButton")[0].style="display: none";document.getElementsByClassName("resetButton")[0].style="display: none";document.getElementById("animationsButton").textContent="ANIMAÇÕES"}}));let r=document.querySelector("body > header > ul > div.saveButton");r.addEventListener("mouseenter",(e=>{if(a==null)return;let t=JSON.parse(localStorage.getItem("animations"));if(JSON.stringify(t)===JSON.stringify(a)){}else{r.style="background-color: rgb(16, 136, 62); display: flex"}}));r.addEventListener("mouseleave",(e=>{if(a==null)return;r.style="background-color: rgb(35,35,35); display: flex"}));r.addEventListener("click",(e=>{if(a==null)return;let t=JSON.parse(localStorage.getItem("animations"));if(JSON.stringify(t)===JSON.stringify(a)){return}localStorage.setItem("animations",JSON.stringify(a));document.getElementsByClassName("main")[0].style.display="none";document.getElementsByClassName("saveButton")[0].style="background-color: rgb(35,35,35)";document.getElementsByClassName("saveButton")[0].style.display="none";document.getElementsByClassName("createAnimButton")[0].style="display: none";document.getElementsByClassName("resetButton")[0].style="display: none";document.getElementById("animationsButton").textContent="ANIMAÇÕES";if(a[0]&&l.querySelector("#AnimName")){l.querySelector("#AnimName").textContent="Anim: "+a[0][0]}a=null;J=0;s=null;o=null}));let u=document.getElementsByClassName("createAnimButton")[0];u.addEventListener("click",(e=>{if(a==null)return;a.push(["Teste01",[[1,"K"],[1,"A"],[1,"U"]]]);b()}));setTimeout((()=>{t.send("gameModifyLoaded")}),3e3)}}));const v="Haxball X";const h="snapshot-1.0.0";const A="Kauany - ARENA CUP 2022❤";let S=false;let x=[["Kauany",[[.5,"K"],[.5,"A"],[.5,"U"],[.5,"A"],[.5,"N"],[.5,"Y"]]],["Arena Cup",[[.5,"A"],[.5,"R"],[.5,"E"],[.5,"N"],[.5,"A"],[1,""],[.5,"C"],[.5,"U"],[.5,"P"]]]];let w=document.getElementsByClassName("flexRow flexGrow")[0];let k=document.createElement("div");k.setAttribute("class","gameInfo");k.style="display: flex; height: content-fit; position: Absolute; bottom: 1.6vw; right: 10px;";let I=document.createElement("div");I.setAttribute("class","gameInfo");I.style="display: flex; flex-flow: wrap; width: 13vw; height: content-fit; position: Absolute; bottom: 0.5vw; right: 10px; justify-content: center; align-items: center";let T=document.createElement("div");T.textContent=v;T.style="align-items: center; justify-content: center; width: content-fit; height: content-fit; font-size: 1vw; font-family: 'Calibri'; color: rgb(255,255,255); white-space: nowrap; margin-right: 0.2vw; opacity: 50%";k.appendChild(T);let q=document.createElement("div");q.textContent="versão "+h;q.style="align-items: center; justify-content: center;width:content-fit; height: content-fit; font-size: 1vw; font-family: 'Calibri'; color: rgb(200,200,200); white-space: nowrap; opacity: 50%";k.appendChild(q);let O=document.createElement("div");O.textContent=A;O.style="align-items: center; justify-content: center;width:content-fit; height: content-fit; width: content-fit; font-size: 1vw; font-family: 'Calibri'; color: rgb(182, 57, 57); white-space: nowrap; opacity: 50%;";I.appendChild(O);w.appendChild(k);w.appendChild(I);let J=0;let R=0;let L=false;function K(e,t){let n=e.querySelector("body > div > div > div.bottom-section > div.chatbox-view > div.input > input[type=text]");if(!n){S=false;return}let l=e.getElementsByClassName("input")[0].getElementsByTagName("button")[0];let i=e.getElementsByClassName("log ps")[0];let a=JSON.parse(localStorage.getItem("animations"));let s=a[J];if(S==t&&s){let a=s[1];let o=a[R];let m=5e3;if(o){m=o[0]*1e3;if(L==false&&e.activeElement!=n){n.value="/avatar "+o[1];l.click();if(a[R+1]){R+=1}else{R=0}}for(let e of i.getElementsByClassName("notice")){if(e.textContent=="Avatar set"){e.remove()}}}setTimeout((()=>{if(S==t){K(e,S)}}),m)}}function D(e){let t=l.getElementsByClassName("isPlaying")[0];if(!t)return;if(e==true){S=(new Date).getTime();t.textContent="Playing: SIM";t.style="color: rgb(170, 245, 110)";R=0;K(l,S)}else{S=false;t.textContent="Playing: NÃO";t.style="color: rgb(245, 110, 110)"}}l.addEventListener("keydown",(e=>{if(!l.getElementsByClassName("input")[0])return;let t=l.getElementsByClassName("input")[0].getElementsByTagName("input")[0];if(e.key.toUpperCase()=="G"){if(l.activeElement==t)return;if(!l.getElementsByClassName("isPlaying")[0])return;if(S==false){D(true)}else{D(false)}}else if(e.key.toUpperCase()=="I"){let e=JSON.parse(localStorage.getItem("animations"));if(!l.querySelector("#AnimName"))return;if(e.length==0){localStorage.setItem("animations",JSON.stringify(x));e=x}if(e[J+1]){J=J+1;l.querySelector("#AnimName").textContent="Anim: "+e[J][0]}else{J=0;l.querySelector("#AnimName").textContent="Anim: "+e[J][0]}R=0}else if(e.key.toUpperCase()=="U"){let e=JSON.parse(localStorage.getItem("animations"));if(e.length==0){localStorage.setItem("animations",JSON.stringify(x));e=x}if(e[J-1]&&e[J-1][0]){J=J-1;l.querySelector("#AnimName").textContent="Anim: "+e[J][0]}else{J=e.length-1;l.querySelector("#AnimName").textContent="Anim: "+e[J][0]}R=0}}));async function _(){setTimeout((()=>{let e=l.getElementsByClassName("game-view")[0];let t=l.getElementsByClassName("gui")[0];let n=l.getElementsByClassName("roomlist-view")[0];let i=l.getElementsByClassName("choose-nickname-view")[0];if(e&&!t){document.getElementsByClassName("gameInfo")[0].style.display="none";document.getElementsByClassName("gameInfo")[1].style.display="none";l.querySelector("body > div:nth-child(1) > div > div.bottom-section > div.buttons").style="width: 200px";let e=l.querySelector("body > div:nth-child(1) > div > div.bottom-section > div.buttons");let t=document.createElement("div");t.style="display: flex; width: 100%; height: 100%; flex-direction: column; align-items: center; justify-content: center;";t.className="gui";let n=document.createElement("div");n.textContent="Anim: Ola World";n.id="AnimName";n.style="margin-bottom: 5px; font-size: 13px; font-family: calibri; ";t.appendChild(n);let i=document.createElement("div");i.setAttribute("class","isPlaying");i.textContent="Playing: NÃO";i.style="margin-bottom: 5px; font-size: 18px; font-family: calibri; color: rgb(245,110,110)";t.appendChild(i);e.appendChild(t);let a=JSON.parse(localStorage.getItem("animations"));if(a.length>0){l.querySelector("#AnimName").textContent="Anim: "+a[J][0]}else{localStorage.setItem("animations",JSON.stringify(x));a=x;l.querySelector("#AnimName").textContent="Anim: "+a[J][0]}}else if(n||i){let e=document.getElementsByClassName("gameInfo");if(getComputedStyle(e[0]).display=="none"){document.getElementsByClassName("gameInfo")[0].style.display="flex";document.getElementsByClassName("gameInfo")[1].style.display="flex"}}_(l)}),100)}_();
